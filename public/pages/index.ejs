<!DOCTYPE html>
<html>

<head>
	<title><%=pageTitle%></title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/main.css">

	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.4/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.2/axios.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
</head>

<body>
	<div id="app" style="display:none">
		<div v-show="!pageLoaded">
			Page is loading...
		</div>
		<div v-show="pageLoaded">
			Flashcards:
			<hr />
			<div class="categories" v-for="item in categories">{{item}}</div>
			<hr />
			<div class="flashcard" v-for="item in flashcards">
				<div class="icon"><img src="images/card_back.png" alt="card_back"></div>
				<div class="infoArea">
					<div class="category">{{item.category}}</div>
					<div class="front">{{item.front}}</div>
					<div class="back">{{item.back}}</div>
				</div>
			</div>

		</div>
	</div>
	<script>
		const app = new Vue({
			el: '#app',
			data: {
				flashcards: [],
				pageLoaded: false,
				pageError: false,
				categories: []
			},
			methods: {
				initialize: function () {
					$("#app").fadeIn(500);
					this.loadPageData();
				},
				loadPageData: function () {
					this.pageLoaded = false;
					axios({
						method: 'post',
						url: 'backend',
						data: {
							action: 'loadPageData'
						}
					}).then(response => {
						const data = response.data;
						this.flashcards = data.flashcards;
						this.categories = data.categories;
						this.pageLoaded = true;
					}).catch(function (error) {
						this.pageError = true;
					});
				}
			}
		});
		app.initialize();
	</script>
</body>

</html>